<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>EventosCultura</title>

<script src="https://cdn.tailwindcss.com"></script>
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body class="bg-gray-50">
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect } = React;

/* =========================
   UTILIDADES
========================= */
const formatDate = (dateStr) =>
  new Date(dateStr).toLocaleDateString("es-ES", {
    day: "numeric",
    month: "long",
    year: "numeric"
  });

/* =========================
   EVENTOS (DATOS)
========================= */
const mockEvents = [
{
  id: "1",
  title: "Concierto de Rock en Vivo",
  category: "Concierto",
  date: "2025-12-15",
  time: "20:00",
  location: "Estadio Nacional, Madrid",
  image: "https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=400",
  price: 45,
  description: "Una noche épica de rock."
},
{
  id: "2",
  title: "Obra de Teatro: La vida es sueño",
  category: "Teatro",
  date: "2025-12-14",
  time: "19:30",
  location: "Teatro Real, Madrid",
  image: "https://images.unsplash.com/photo-1507924538820-ede94a04019d?w=400",
  price: 35,
  description: "Clásico del teatro español."
},
{
  id: "3",
  title: "Exposición de Arte Contemporáneo",
  category: "Arte",
  date: "2025-12-20",
  time: "10:00",
  location: "Museo Reina Sofía",
  image: "https://images.unsplash.com/photo-1517694712202-14dd9538aa97?w=400",
  price: 0,
  description: "Arte moderno y contemporáneo."
},
{
  id: "4",
  title: "Festival Gastronómico",
  category: "Gastronomía",
  date: "2025-12-22",
  time: "12:00",
  location: "Parque del Retiro",
  image: "https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400",
  price: 0,
  description: "Cocina internacional."
},
{
  id: "5",
  title: "Concierto de Jazz Nocturno",
  category: "Concierto",
  date: "2025-12-18",
  time: "22:00",
  location: "Sala Clamores",
  image: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400",
  price: 25,
  description: "Jazz en vivo con artistas internacionales."
}
];

/* =========================
   COMPONENTE PRINCIPAL
========================= */
function App() {
  const [search, setSearch] = useState("");
  const [dateFilter, setDateFilter] = useState(null);
  const [filteredEvents, setFilteredEvents] = useState(mockEvents);

  useEffect(() => {
    let results = [...mockEvents];

    /* BUSCADOR */
    if (search) {
      results = results.filter(e =>
        e.title.toLowerCase().includes(search.toLowerCase()) ||
        e.category.toLowerCase().includes(search.toLowerCase()) ||
        e.location.toLowerCase().includes(search.toLowerCase())
      );
    }

    /* FILTRO DE FECHA */
    if (dateFilter) {
      const today = new Date();
      today.setHours(0,0,0,0);

      results = results.filter(e => {
        const eventDate = new Date(e.date);

        if (dateFilter === "today") {
          return eventDate.getTime() === today.getTime();
        }

        if (dateFilter === "tomorrow") {
          const t = new Date(today);
          t.setDate(today.getDate() + 1);
          return eventDate.getTime() === t.getTime();
        }

        if (dateFilter === "week") {
          const end = new Date(today);
          end.setDate(today.getDate() + 7);
          return eventDate >= today && eventDate <= end;
        }

        if (dateFilter === "weekend") {
          const d = eventDate.getDay();
          return d === 6 || d === 0;
        }

        if (dateFilter === "month") {
          const end = new Date(today);
          end.setMonth(today.getMonth() + 1);
          return eventDate >= today && eventDate <= end;
        }

        return true;
      });
    }

    setFilteredEvents(results);
  }, [search, dateFilter]);

  return (
    <main className="max-w-6xl mx-auto p-6">
      <h1 className="text-3xl font-bold mb-6">EventosCultura</h1>

      {/* BUSCADOR */}
      <input
        type="text"
        placeholder="Buscar eventos..."
        value={search}
        onChange={e => setSearch(e.target.value)}
        className="w-full mb-4 p-3 border rounded-lg"
      />

      {/* FILTROS DE FECHA */}
      <div className="flex flex-wrap gap-2 mb-6">
        {[
          ["today","Hoy"],
          ["tomorrow","Mañana"],
          ["week","Esta semana"],
          ["weekend","Fin de semana"],
          ["month","Este mes"]
        ].map(([id,label]) => (
          <button
            key={id}
            onClick={() => setDateFilter(dateFilter === id ? null : id)}
            className={`px-4 py-2 rounded-full ${
              dateFilter === id ? "bg-purple-600 text-white" : "bg-gray-200"
            }`}
          >
            {label}
          </button>
        ))}
      </div>

      {/* LISTADO */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {filteredEvents.map(event => (
          <div key={event.id} className="bg-white rounded-xl shadow p-4">
            <img src={event.image} className="h-40 w-full object-cover rounded" />
            <h3 className="font-bold text-lg mt-3">{event.title}</h3>
            <p className="text-sm text-gray-600">{formatDate(event.date)} · {event.time}</p>
            <p className="text-sm">{event.location}</p>
            <p className="mt-2 font-semibold">
              {event.price === 0 ? "Gratis" : `${event.price}€`}
            </p>
          </div>
        ))}
      </div>

      {filteredEvents.length === 0 && (
        <p className="text-center mt-10 text-gray-500">
          No se encontraron eventos
        </p>
      )}
    </main>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
